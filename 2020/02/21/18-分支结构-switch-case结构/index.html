<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构 | 云钰的亭轩阁</title><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构</h1><a id="logo" href="/.">云钰的亭轩阁</a><p class="description">Running water never goes stale, so you gotta just keep on flowing.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构</h1><div class="post-meta"><a href="/2020/02/21/18-%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84-switch-case%E7%BB%93%E6%9E%84/#comments" class="comment-count"></a><p><span class="date">Feb 21, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><h2 id="Go语言从入门到放弃系列-lt-18-gt-分支结构-switch-case结构"><a href="#Go语言从入门到放弃系列-lt-18-gt-分支结构-switch-case结构" class="headerlink" title="Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构"></a>Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构</h2><p>&emsp;&emsp;在上一小节中，我们介绍了分支结构的概念以及单分支、双分支、和多分支程序的写法。同时我们也介绍了if-else结构在分支结构中的用法。不仅如此，我们还讲解了在使用分支结构时所需要注意的问题。在这一小节中，我们将依旧对分支结构进行讲解，集中说明switch-case结构的用法，以及分支结构的嵌套使用。</p>
<h3 id="switch-case结构"><a href="#switch-case结构" class="headerlink" title="switch-case结构"></a>switch-case结构</h3><p>&emsp;&emsp;当我们遇到多分支的程序时候，我们可以采用if-else if-else等方式进行分支分割，但是对于更多条件、更多分支的情况而言，使用if系列的结构就稍显复杂了，取而代之的是，此时我们更多地使用switch-case结构，switch case结构的使用方式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> 表达式 &#123;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">1</span>：</span><br><span class="line">    语句块<span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">2</span>：</span><br><span class="line">    语句块<span class="number">2</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;其使用过程为：switch表示进入条件分支结构，表达式往往是一个具有结果的表达式，比如关系表达式、数学表达式、逻辑表达式、甚至于有返回值的函数都可以。case关键字表示进入当前的分支，当表达式的结果与case后面的结果相匹配时，其语句块得以执行。我们可以将其等价为：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式 == 结果<span class="number">1</span> &#123;</span><br><span class="line">    语句块<span class="number">1</span>    </span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> 表达式 == 结果<span class="number">2</span> &#123;</span><br><span class="line">    语句块<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在这里我们需要强调说明的是：相比于一些其他编程语言，Go语言针对switch结构有一个极大的不同点，即执行匹配的语句块后直接跳出switch结构，而不需要break关键字。当然如果希望执行匹配的语句块后再继续向下执行其他的语句块，可以通过另一个关键字fallthrough完成。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">"a=1"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    fmt.Println(<span class="string">"a=2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;上述的程序段输出结果为：a=1，这与C语言和Java等语言完全不同。而对于下面的这段程序：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">"a=1"</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    fmt.Println(<span class="string">"a=2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这个时候的输出结果为a=1换行a=2，也就是说fallthrough的用处就是让程序从当前的分支末尾滑向下面的那个分支，使得两个分支都得以执行。这个关键字其实也可以是有用处的，例如我们输入一个月份，让程序输出该月份的天数。我们知道1、3、5、7、8、10、12月份都是31天，那么当我们输入这几个月份中的某一个时，我们可以让他们一直向下滑，滑到12，并在12所匹配的代码块中输出天数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> month <span class="keyword">int</span></span><br><span class="line">    fmt.Scanln(&amp;month)</span><br><span class="line">    <span class="keyword">switch</span> month &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共31天"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共28天"</span>)    <span class="comment">//这里不做闰年判断了</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共30天"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;对于上述的程序而言，输入的值为1、3、5、7、8、10、12中的一个时，程序会向下滑到12，并输出，当输入的值为2时，直接输出，当输入的是剩下的几个值时，程序会滑到11并输出。</p>
<h3 id="switch-case-default结构"><a href="#switch-case-default结构" class="headerlink" title="switch-case-default结构"></a>switch-case-default结构</h3><p>&emsp;&emsp;在这个结构中，其实前面与switch-case结构是相同的，只是多了一个default关键字，我将其单独列出来只是想说明default关键字并不是必须的，而是说在大多数的情况下我们将default与switch-case结构相搭配。 </p>
<p>&emsp;&emsp;我们针对输入月份输出天数的代码进行分析，我们会发现一个问题：一旦用户输入的数字超出了1-12的范围，或者误操作输入错误了，程序就不执行了。default关键字的作用就是弥补这个问题，即当所有的case均不匹配的时候，会执行default中的代码块：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> month &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>： </span><br><span class="line">    fmt.Println(<span class="string">"31天"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>：</span><br><span class="line">    fmt.Println(<span class="string">"28天"</span>)</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">default</span>：</span><br><span class="line">    fmt.Println(<span class="string">"输入错误"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在这段程序中，一旦用户输入了错误的数字，例如13，程序将会响应为：输入错误。如果将其与if系列相类比，default的作用可以理解为if结构中的最后一个else。</p>
<h3 id="switch结构中的注意点"><a href="#switch结构中的注意点" class="headerlink" title="switch结构中的注意点"></a>switch结构中的注意点</h3><h4 id="1-case后的表达式可以有多个，用逗号分隔"><a href="#1-case后的表达式可以有多个，用逗号分隔" class="headerlink" title="1. case后的表达式可以有多个，用逗号分隔"></a>1. case后的表达式可以有多个，用逗号分隔</h4><p>&emsp;&emsp;程序的执行流程为判断switch后的表达式的值与哪个case相匹配，如果匹配则执行。那么一个case可以有多个入口，例如上面的例子，当输入月份时，有很多的月份数最终会进入到一个case中，我们其实就不需要那么多的fallthrough了，我们将其列举在case后面就可以了：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> month <span class="keyword">int</span></span><br><span class="line">    fmt.Scanln(&amp;month)</span><br><span class="line">    <span class="keyword">switch</span> month &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共31天"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共28天"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">11</span>:</span><br><span class="line">        fmt.Println(month, <span class="string">"月共30天"</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">        fmt.Print(<span class="string">"输入错误"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这样一来，程序就相比而言简单的多了，在一个case中的不同的条件中，其相互的关系是或关系，相当于是：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式 == 结果<span class="number">1</span> || 表达式 == 结果<span class="number">2</span> || 表达式 == 结果<span class="number">3</span> ...</span><br></pre></td></tr></table></figure>
<h4 id="2-各个case后的数据类型需要与switch后的数据类型相同"><a href="#2-各个case后的数据类型需要与switch后的数据类型相同" class="headerlink" title="2. 各个case后的数据类型需要与switch后的数据类型相同"></a>2. 各个case后的数据类型需要与switch后的数据类型相同</h4><p>&emsp;&emsp;switch后面的表达式的结果是具备数据类型的，当然其相与匹配的case的结果的数据类型需要与其相同，否则在编译过程中就会报错，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int32</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">int64</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> b:</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在上述的程序段中，我们定义两个不同的整数类型，我们在switch后的表达式中运用的是int32的数据类型，而case中运用的是int64的数据类型。其程序运行结果并不是因为case匹配不上而不执行语句块，而是因为数据类型不匹配所导致的编译错误，错误类型为：invalid case b in switch on a (mismatched types int64 and int32)。</p>
<h4 id="3-如果case后是常量（字面量）时，case不可以重复"><a href="#3-如果case后是常量（字面量）时，case不可以重复" class="headerlink" title="3. 如果case后是常量（字面量）时，case不可以重复"></a>3. 如果case后是常量（字面量）时，case不可以重复</h4><p>&emsp;&emsp;在case后面可以是变量、也可以是常量（例如直接写成10），当后面是常量的时候，就不可以重复，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">"结果为1"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">"结果还是1"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在上述的程序中具备两个case结果，但是两个case后面的常量值均为1，这时在程序编译的时候会报错：duplicate case 1 in switch。 </p>
<p>&emsp;&emsp;那么我们将集中的一个换成变量，同时这个变量依旧为1，如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">"结果为1"</span>)</span><br><span class="line">    <span class="keyword">case</span> b:</span><br><span class="line">    fmt.Println(<span class="string">"结果还是1"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这个时候程序就不报错了，可以正常执行，那么两个case均满足，程序会选择先出现的那个分支，也就是说会匹配到常量1的那个分支，而不是变量b的分支。</p>
<h4 id="4-switch后可以不接表达式，此时便类似于if-else结构"><a href="#4-switch后可以不接表达式，此时便类似于if-else结构" class="headerlink" title="4. switch后可以不接表达式，此时便类似于if-else结构"></a>4. switch后可以不接表达式，此时便类似于if-else结构</h4><p>&emsp;&emsp;switch后面不加表达式，也就没有了需要被匹配的表达式，这与传统的switch结构就有了很大的不同，此时则更像是if系列结构，同时，case后面的表达式也基本都成为了关系表达式与逻辑表达式，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> score <span class="keyword">int</span></span><br><span class="line">fmt.Scanln(&amp;score)</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> score &gt;= <span class="number">80</span> &amp;&amp; score &lt;= <span class="number">100</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩为H1"</span>)</span><br><span class="line">    <span class="keyword">case</span> score &gt;= <span class="number">70</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩为H2"</span>)</span><br><span class="line">    <span class="keyword">case</span> score &gt;= <span class="number">50</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩为H3"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">"不及格"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在上述的程序中，switch的出现相当于是进入了分支结构，但是后面没有表达式直接是大括号，那么程序的执行流程是：逐个判断这些case中的表达式的真假，一旦为真，则进入该语句块。</p>
<h4 id="5-在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）"><a href="#5-在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）" class="headerlink" title="5. 在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）"></a>5. 在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）</h4><p>&emsp;&emsp;这个特性由于用的相对少一些，我就不过多介绍，只是举个例子说明一下现象而已：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> score := <span class="number">80</span>; &#123; </span><br><span class="line">    <span class="keyword">case</span> score &gt;= <span class="number">80</span> &amp;&amp; score &lt;= <span class="number">100</span> :</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这种使用方式是没有问题的，但是上述程序中定义的score只能在switch的大括号中才能使用（定义域的问题后面会说明）。一旦出了这个大括号，score就不能够再次使用了。这个方法不是很常用，因此只需要了解一下，当他人提及时知道这种用法是正确的。</p>
<h4 id="6-分支结构可以嵌套"><a href="#6-分支结构可以嵌套" class="headerlink" title="6. 分支结构可以嵌套"></a>6. 分支结构可以嵌套</h4><p>&emsp;&emsp;这个特性其实很好理解，在分支结构中，往往会出现一个或多个满足不同条件下的语句块。那么我们在这个语句块中再使用分支结构，就可以称之为分支结构的嵌套，例如当一个人年龄超过18岁可以租房，在这个前提下需要根据性别分配宿舍，其程序实现如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age <span class="keyword">int</span> = <span class="number">20</span></span><br><span class="line"><span class="keyword">var</span> gender <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">18</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> gender == <span class="literal">true</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"分配男寝"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"分配女寝"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"年龄不够"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;上述的程序中，就是根据年龄出现一个分支结构，在第一个语句块中，又出现了根据性别的分支结构，两个分支结构套在一起，就是分支的嵌套。当然根据这小节所讲述的内容，读者可以自行将上述程序改写为switch-case结构作为练习。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>&emsp;&emsp;在这个小节中，我们主要介绍了switch-case乃至于default结构的用法以及变形和注意事项，同时也提及了fallthrough关键字的用法，在最后我们也简述了分支结构的嵌套调用。由于在Go语言中的if结构中，大括号是强制需要写的，因此也不需要讲解像C语言中else与if的匹配问题。在下一章节中，我们将会开始介绍计算机中的第三个流程控制结构：循环结构，并讲解其使用方式和注意事项。</p>
</div><div class="tags"><a href="/tags/Go%E8%AF%AD%E8%A8%80/">Go语言</a></div><div class="post-share"></div><div class="post-nav"><a href="/2020/02/22/19-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84goto%E3%80%81for%E7%9A%84%E4%BD%BF%E7%94%A8/" class="pre">Go语言从入门到放弃系列&lt;19&gt; 循环结构goto、for的使用</a><a href="/2020/02/20/17-%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84-if%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5/" class="next">Go语言从入门到放弃系列&lt;17&gt; 分支结构-if条件语句</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Go语言从入门到放弃系列-lt-18-gt-分支结构-switch-case结构"><span class="toc-text">Go语言从入门到放弃系列&lt;18&gt; 分支结构-switch case结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#switch-case结构"><span class="toc-text">switch-case结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch-case-default结构"><span class="toc-text">switch-case-default结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch结构中的注意点"><span class="toc-text">switch结构中的注意点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-case后的表达式可以有多个，用逗号分隔"><span class="toc-text">1. case后的表达式可以有多个，用逗号分隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-各个case后的数据类型需要与switch后的数据类型相同"><span class="toc-text">2. 各个case后的数据类型需要与switch后的数据类型相同</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-如果case后是常量（字面量）时，case不可以重复"><span class="toc-text">3. 如果case后是常量（字面量）时，case不可以重复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-switch后可以不接表达式，此时便类似于if-else结构"><span class="toc-text">4. switch后可以不接表达式，此时便类似于if-else结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）"><span class="toc-text">5. 在switch后以及if后的表达式前，均可以出现数据的定义，但作用域只限于分支结构中（不常用）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-分支结构可以嵌套"><span class="toc-text">6. 分支结构可以嵌套</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/03/31/53-channel%E7%BB%86%E8%8A%82%E8%AE%A8%E8%AE%BA/">Go语言从入门到放弃系列<53> channel细节讨论</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/30/52-channel%E7%AE%A1%E9%81%93%E5%85%A5%E9%97%A8/">Go语言从入门到放弃系列<52> channel管道入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/29/51-%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E7%AE%A1%E9%81%93/">Go语言从入门到放弃系列<51> 资源竞争与管道</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/27/50-Goroutine%E5%85%A5%E9%97%A8/">Go语言从入门到放弃系列<50> Goroutine入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/26/49-Goroutine%E6%A6%82%E5%BF%B5%E7%AE%80%E4%BB%8B/">Go语言从入门到放弃系列<49> Goroutine概念简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/25/48-JSON%E4%B8%8E%E5%BA%8F%E5%88%97%E5%8C%96/">Go语言从入门到放弃系列<48> JSON与序列化</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/24/47-%E6%96%87%E4%BB%B6%E4%B8%8EIO%E4%BA%8C/">Go语言从入门到放弃系列<47> 文件与IO<二></a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/22/46-%E6%96%87%E4%BB%B6%E4%B8%8EIO%E4%B8%80/">Go语言从入门到放弃系列<46> 文件与IO<一></a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/21/45-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-%E5%A4%9A%E6%80%81/">Go语言从入门到放弃系列<45> 面向对象-多态</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/19/44-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-%E6%8E%A5%E5%8F%A3%E7%BB%86%E8%8A%82%E8%AE%A8%E8%AE%BA/">Go语言从入门到放弃系列<44> 面向对象-接口细节讨论</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/Go%E8%AF%AD%E8%A8%80/" style="font-size: 15px;">Go语言</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">53</span></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Site Map</a> |  <a href="/atom.xml">Subscribe to this site</a> |  <a href="/about/">Contact the blogger</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Devin DENG.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script></body></html>